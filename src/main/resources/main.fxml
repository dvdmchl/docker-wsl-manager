<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.dreamabout.sw.dockerwslmanager.MainController">
    
    <!-- Top: Menu and Connection Panel -->
    <top>
        <VBox>
            <MenuBar>
                <menus>
                    <Menu text="Settings">
                        <items>
                            <MenuItem text="General Settings" onAction="#handleGeneralSettingsAction"/>
                            <CheckMenuItem fx:id="autoRefreshMenuItem" text="Auto-refresh Containers" onAction="#handleAutoRefreshAction"/>
                            <MenuItem text="Keybinds" onAction="#handleKeybindsAction"/>
                        </items>
                    </Menu>
                    <Menu text="Help">
                        <items>
                            <MenuItem text="About" onAction="#handleAboutAction"/>
                        </items>
                    </Menu>
                </menus>
            </MenuBar>
            
            <VBox spacing="10" style="-fx-background-color: #f4f4f4; -fx-padding: 15;">
                <Label text="Docker Connection" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Status:"/>
                    <Label fx:id="connectionStatusLabel" text="Not Connected" style="-fx-text-fill: red;"/>
                    <Button fx:id="connectAutoButton" text="ðŸ”— _Connect / Reconnect" onAction="#handleConnectAuto"/>
                    <Button fx:id="disconnectButton" text="ðŸ”Œ _Disconnect" onAction="#handleDisconnect"/>
                </HBox>
            </VBox>
        </VBox>
    </top>
    
    <!-- Center: Main Content Tabs -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="ALL_TABS">
            
            <!-- Containers Tab -->
            <Tab text="Containers" closable="false">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="containersTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="containerNameColumn" text="Name" prefWidth="200"/>
                                <TreeTableColumn fx:id="containerIdColumn" text="ID" prefWidth="100"/>
                                <TreeTableColumn fx:id="containerImageColumn" text="Image" prefWidth="250"/>
                                <TreeTableColumn fx:id="containerPortsColumn" text="Ports" prefWidth="250"/>
                                <TreeTableColumn fx:id="containerStatusColumn" text="Status" prefWidth="200"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button fx:id="refreshContainersButton" text="âŸ³ Refres_h" onAction="#handleRefreshContainers"/>
                            <Button fx:id="startContainerButton" text="â–¶ _Start" onAction="#handleStartContainer"/>
                            <Button fx:id="stopContainerButton" text="â¹ S_top" onAction="#handleStopContainer"/>
                            <Button fx:id="restartContainerButton" text="â†» Res_tart" onAction="#handleRestartContainer"/>
                            <Button fx:id="removeContainerButton" text="ðŸ—‘ Re_move" onAction="#handleRemoveContainer"/>
                            <Button fx:id="openDetailsButton" text="ðŸ“„ _Open Details" onAction="#handleOpenDetails"/>
                            <Button fx:id="attachConsoleButton" text="&gt;_ _Attach Console" onAction="#handleAttachConsole"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Images Tab -->
            <Tab text="Images" closable="false">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="imagesTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="imageRepoColumn" text="Repository" prefWidth="300"/>
                                <TreeTableColumn fx:id="imageIdColumn" text="ID" prefWidth="120"/>
                                <TreeTableColumn fx:id="imageTagColumn" text="Tag" prefWidth="150"/>
                                <TreeTableColumn fx:id="imageSizeColumn" text="Size" prefWidth="150"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button fx:id="refreshImagesButton" text="âŸ³ Refres_h" onAction="#handleRefreshImages"/>
                            <Button fx:id="pullImageButton" text="â¬‡ _Pull Image" onAction="#handlePullImage"/>
                            <Button fx:id="removeImageButton" text="ðŸ—‘ Re_move" onAction="#handleRemoveImage"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Volumes Tab -->
            <Tab text="Volumes" closable="false">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="volumesTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="volumeNameColumn" text="Name" prefWidth="300"/>
                                <TreeTableColumn fx:id="volumeDriverColumn" text="Driver" prefWidth="150"/>
                                <TreeTableColumn fx:id="volumeMountpointColumn" text="Mountpoint" prefWidth="400"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button fx:id="refreshVolumesButton" text="âŸ³ Refres_h" onAction="#handleRefreshVolumes"/>
                            <Button fx:id="removeVolumeButton" text="ðŸ—‘ Re_move" onAction="#handleRemoveVolume"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Networks Tab -->
            <Tab text="Networks" closable="false">
                <BorderPane>
                    <center>
                        <TableView fx:id="networksTable">
                            <columns>
                                <TableColumn fx:id="networkIdColumn" text="ID" prefWidth="120"/>
                                <TableColumn fx:id="networkNameColumn" text="Name" prefWidth="200"/>
                                <TableColumn fx:id="networkDriverColumn" text="Driver" prefWidth="150"/>
                                <TableColumn fx:id="networkScopeColumn" text="Scope" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button fx:id="refreshNetworksButton" text="âŸ³ Refres_h" onAction="#handleRefreshNetworks"/>
                            <Button fx:id="removeNetworkButton" text="ðŸ—‘ Re_move" onAction="#handleRemoveNetwork"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
        </TabPane>
    </center>
    
</BorderPane>
