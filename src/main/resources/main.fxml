<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="org.dreamabout.sw.dockerwslmanager.MainController">
    
    <!-- Top: Connection Panel -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #f4f4f4; -fx-padding: 15;">
            <Label text="Docker Connection" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Status:"/>
                <Label fx:id="connectionStatusLabel" text="Not Connected" style="-fx-text-fill: red;"/>
                <Button fx:id="connectAutoButton" text="Connect / Reconnect" onAction="#handleConnectAuto"/>
                <Button fx:id="disconnectButton" text="Disconnect" onAction="#handleDisconnect"/>
            </HBox>
        </VBox>
    </top>
    
    <!-- Center: Main Content Tabs -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            
            <!-- Containers Tab -->
            <Tab text="Containers">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="containersTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="containerNameColumn" text="Name" prefWidth="200"/>
                                <TreeTableColumn fx:id="containerIdColumn" text="ID" prefWidth="100"/>
                                <TreeTableColumn fx:id="containerImageColumn" text="Image" prefWidth="250"/>
                                <TreeTableColumn fx:id="containerPortsColumn" text="Ports" prefWidth="250"/>
                                <TreeTableColumn fx:id="containerStatusColumn" text="Status" prefWidth="200"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button text="Refresh" onAction="#handleRefreshContainers"/>
                            <Button fx:id="startContainerButton" text="Start" onAction="#handleStartContainer"/>
                            <Button fx:id="stopContainerButton" text="Stop" onAction="#handleStopContainer"/>
                            <Button fx:id="restartContainerButton" text="Restart" onAction="#handleRestartContainer"/>
                            <Button fx:id="removeContainerButton" text="Remove" onAction="#handleRemoveContainer"/>
                            <Button fx:id="viewLogsButton" text="View Logs" onAction="#handleViewLogs"/>
                            <Button fx:id="attachConsoleButton" text="Attach Console" onAction="#handleAttachConsole"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Images Tab -->
            <Tab text="Images">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="imagesTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="imageRepoColumn" text="Repository" prefWidth="300"/>
                                <TreeTableColumn fx:id="imageIdColumn" text="ID" prefWidth="120"/>
                                <TreeTableColumn fx:id="imageTagColumn" text="Tag" prefWidth="150"/>
                                <TreeTableColumn fx:id="imageSizeColumn" text="Size" prefWidth="150"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button text="Refresh" onAction="#handleRefreshImages"/>
                            <Button fx:id="pullImageButton" text="Pull Image" onAction="#handlePullImage"/>
                            <Button fx:id="removeImageButton" text="Remove" onAction="#handleRemoveImage"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Volumes Tab -->
            <Tab text="Volumes">
                <BorderPane>
                    <center>
                        <TreeTableView fx:id="volumesTable" showRoot="false">
                            <columns>
                                <TreeTableColumn fx:id="volumeNameColumn" text="Name" prefWidth="300"/>
                                <TreeTableColumn fx:id="volumeDriverColumn" text="Driver" prefWidth="150"/>
                                <TreeTableColumn fx:id="volumeMountpointColumn" text="Mountpoint" prefWidth="400"/>
                            </columns>
                        </TreeTableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button text="Refresh" onAction="#handleRefreshVolumes"/>
                            <Button fx:id="removeVolumeButton" text="Remove" onAction="#handleRemoveVolume"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Networks Tab -->
            <Tab text="Networks">
                <BorderPane>
                    <center>
                        <TableView fx:id="networksTable">
                            <columns>
                                <TableColumn fx:id="networkIdColumn" text="ID" prefWidth="120"/>
                                <TableColumn fx:id="networkNameColumn" text="Name" prefWidth="200"/>
                                <TableColumn fx:id="networkDriverColumn" text="Driver" prefWidth="150"/>
                                <TableColumn fx:id="networkScopeColumn" text="Scope" prefWidth="150"/>
                            </columns>
                        </TableView>
                    </center>
                    <bottom>
                        <HBox spacing="10" style="-fx-padding: 10;">
                            <Button text="Refresh" onAction="#handleRefreshNetworks"/>
                            <Button fx:id="removeNetworkButton" text="Remove" onAction="#handleRemoveNetwork"/>
                        </HBox>
                    </bottom>
                </BorderPane>
            </Tab>
            
            <!-- Logs Tab -->
            <Tab text="Logs">
                <BorderPane>
                    <center>
                        <TextArea fx:id="logsTextArea" editable="false" wrapText="false" 
                                  style="-fx-font-family: 'Courier New', monospace;"/>
                    </center>
                </BorderPane>
            </Tab>
            
        </TabPane>
    </center>
    
</BorderPane>
